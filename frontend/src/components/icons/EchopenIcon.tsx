import React, { useEffect, useState, useRef } from "react";

export default function EchopenIcon(props: React.SVGProps<SVGSVGElement>) {
  // Extract width, height, and className from props
  const { width, height, className, ...otherProps } = props;

  // State to control animation
  const [isVisible, setIsVisible] = useState(false);
  const iconRef = useRef<SVGSVGElement>(null);

  // Use Intersection Observer to detect when the icon is visible
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        // If the icon is intersecting (visible), set isVisible to true
        if (entries[0].isIntersecting) {
          setIsVisible(true);
          // Once we've seen it, no need to keep observing
          if (iconRef.current) {
            observer.unobserve(iconRef.current);
          }
        }
      },
      { threshold: 0.2 } // Trigger when at least 20% of the element is visible
    );

    // Start observing the icon
    if (iconRef.current) {
      observer.observe(iconRef.current);
    }

    // Clean up the observer when component unmounts
    return () => {
      if (iconRef.current) {
        observer.unobserve(iconRef.current);
      }
    };
  }, []);

  // CSS classes with animation will only be applied when isVisible is true
  const animationClass = isVisible ? "animate" : "no-animate";

  return (
    <svg
      ref={iconRef}
      width={width || "100%"}
      height={height || "100%"}
      viewBox="0 0 1024 1024"
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="xMidYMid meet"
      className={`${className} ${animationClass}`}
      style={{ maxWidth: "100%", maxHeight: "100%" }}
      {...otherProps}
    >
      <defs>
        <style>
          {`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            
            @keyframes scaleIn {
              from { 
                transform: scale(0.5);
                opacity: 0;
              }
              to { 
                transform: scale(1);
                opacity: 1;
              }
            }
            
            .pen-part {
              opacity: 1;
            }
            
            @keyframes fadeIn15 {
              from { opacity: 0; }
              to { opacity: 0.15; }
            }
            
            @keyframes fadeIn25 {
              from { opacity: 0; }
              to { opacity: 0.25; }
            }
            
            @keyframes fadeIn35 {
              from { opacity: 0; }
              to { opacity: 0.35; }
            }
            
            @keyframes fadeIn45 {
              from { opacity: 0; }
              to { opacity: 0.45; }
            }
            
            @keyframes fadeIn55 {
              from { opacity: 0; }
              to { opacity: 0.55; }
            }
            
            @keyframes fadeIn70 {
              from { opacity: 0; }
              to { opacity: 0.7; }
            }
            
            @keyframes fadeIn85 {
              from { opacity: 0; }
              to { opacity: 0.85; }
            }
            
            @keyframes fadeInFull {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            
            .animate .wave-1 {
              animation: fadeIn15 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.8s;
            }
            
            .animate .wave-2 {
              animation: fadeIn25 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.7s;
            }
            
            .animate .wave-3 {
              animation: fadeIn35 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.6s;
            }
            
            .animate .wave-4 {
              animation: fadeIn45 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.5s;
            }
            
            .animate .wave-5 {
              animation: fadeIn55 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.4s;
            }
            
            .animate .wave-6 {
              animation: fadeIn70 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.3s;
            }
            
            .animate .wave-7 {
              animation: fadeIn85 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.2s;
            }
            
            .animate .wave-8 {
              animation: fadeInFull 0.8s ease-out forwards;
              opacity: 0;
              animation-delay: 0.1s;
            }
            
            .no-animate .wave-1,
            .no-animate .wave-2,
            .no-animate .wave-3,
            .no-animate .wave-4,
            .no-animate .wave-5,
            .no-animate .wave-6,
            .no-animate .wave-7,
            .no-animate .wave-8 {
              opacity: 0;
            }
          `}
        </style>
      </defs>
      <defs>
        <filter id="darken">
          <feComponentTransfer>
            <feFuncR type="linear" slope="0.4" />
            <feFuncG type="linear" slope="0.5" />
            <feFuncB type="linear" slope="0.6" />
          </feComponentTransfer>
        </filter>
      </defs>
      <g
        transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)"
        fill="currentColor"
        stroke="none"
      >
        <path
          className="wave-1"
          d="M6190 9540 c-527 -50 -1081 -234 -1533 -511 -248 -153 -527 -363
        -703 -532 -317 -303 -711 -897 -828 -1249 -26 -76 -35 -178 -17 -178 19 0 59
        65 105 168 130 290 234 473 377 662 348 460 654 733 1163 1037 306 183 593
        294 996 386 296 69 528 92 820 84 363 -11 687 -75 1055 -210 337 -124 630
        -291 920 -523 203 -164 456 -433 615 -654 342 -477 589 -1121 679 -1771 34
        -249 45 -416 45 -689 -1 -455 -46 -795 -160 -1230 -209 -795 -658 -1595 -1199
        -2135 -467 -466 -994 -763 -1552 -874 -715 -143 -1396 9 -1967 437 -138 104
        -139 102 -15 -20 341 -336 793 -538 1319 -589 444 -43 945 59 1405 286 326
        161 613 372 905 665 416 417 757 938 1014 1547 190 454 320 964 372 1463 20
        188 22 679 5 884 -49 581 -201 1124 -460 1646 -176 354 -371 622 -661 907
        -272 267 -536 458 -855 620 -368 186 -738 300 -1165 358 -136 19 -543 28 -680
        15z"
        />
        <g filter="url(#darken)">
        <path
          className="pen-part"
          d="M930 9436 c-164 -63 -240 -142 -287 -295 -24 -80 -16 -203 21 -317 7
        -22 1 -27 -94 -84 -31 -20 -65 -85 -81 -157 -17 -76 0 -188 47 -306 20 -51
        120 -288 221 -527 102 -239 202 -478 223 -530 21 -52 65 -158 98 -235 258
        -598 267 -616 334 -651 48 -25 90 -18 129 22 33 34 34 38 32 107 -3 99 -28
        206 -62 258 -15 24 -53 72 -84 106 -106 118 -154 200 -302 513 -117 246 -212
        480 -281 685 -55 166 -123 429 -131 509 l-5 61 25 -25 c18 -17 128 -264 337
        -755 704 -1650 835 -1950 867 -1993 14 -19 44 -42 67 -52 39 -16 45 -25 94
        -128 28 -61 187 -427 352 -814 166 -387 336 -784 380 -883 44 -99 98 -225 120
        -280 79 -191 273 -610 297 -642 23 -31 60 -48 112 -55 23 -3 31 -23 108 -268
        46 -146 95 -314 109 -375 15 -60 30 -127 36 -148 6 -27 21 -46 51 -68 82 -60
        230 -204 326 -318 193 -230 416 -526 465 -617 33 -62 67 -82 101 -60 33 22 35
        74 8 170 -13 44 -30 119 -38 166 -23 136 -96 745 -103 865 l-7 110 -96 160
        c-74 123 -342 582 -366 627 -2 5 3 18 11 30 33 47 13 192 -38 286 -48 87 -75
        145 -240 517 -158 356 -359 804 -426 950 -17 39 -77 171 -132 295 -55 124
        -159 350 -230 503 -104 224 -129 284 -123 305 28 106 8 205 -64 332 -27 47
        -57 103 -66 125 -9 22 -46 109 -81 193 -35 84 -76 176 -91 205 -32 63 -142
        310 -190 427 -19 47 -70 157 -113 245 -43 88 -124 268 -180 400 -56 132 -154
        348 -218 480 -152 318 -177 372 -224 490 -54 136 -77 169 -133 191 -40 15 -51
        26 -87 88 -81 140 -125 167 -268 173 -64 2 -107 -2 -130 -11z m191 -162 c16
        -15 26 -30 24 -34 -2 -4 -26 -10 -52 -13 -27 -3 -67 -12 -91 -20 -36 -13 -42
        -13 -42 -1 0 26 28 82 47 93 28 17 83 5 114 -25z m209 -194 c62 -32 53 -50
        -26 -50 -52 0 -94 -10 -211 -50 -156 -53 -191 -71 -237 -119 -22 -23 -32 -28
        -38 -19 -39 63 91 166 297 237 79 27 164 27 215 1z m138 -285 c41 -82 155
        -332 254 -555 99 -223 207 -466 240 -540 33 -74 102 -232 153 -350 51 -118
        120 -273 153 -345 71 -154 192 -449 192 -469 0 -15 -21 -26 -49 -26 -14 0 -22
        16 -36 65 -9 35 -30 92 -47 127 -16 35 -34 88 -40 118 -17 96 -139 365 -168
        373 -25 7 -65 90 -144 299 -36 97 -102 252 -145 345 -84 180 -198 450 -330
        783 -51 130 -95 225 -120 260 -27 38 -36 57 -28 62 28 18 46 -5 115 -147z
        m-189 88 c10 -21 71 -155 134 -298 64 -143 170 -381 237 -530 67 -148 149
        -333 182 -410 33 -77 94 -219 135 -315 91 -212 181 -427 274 -655 39 -93 72
        -175 75 -181 4 -10 -75 -58 -83 -50 -2 1 -68 151 -147 332 -79 181 -186 426
        -239 544 -425 961 -533 1208 -596 1365 -40 98 -76 186 -81 195 -11 18 22 39
        62 40 22 0 32 -8 47 -37z m1285 -2583 c15 -5 35 -28 50 -58 l25 -49 -122 -6
        c-194 -9 -271 -32 -401 -121 -37 -26 -71 -45 -74 -42 -3 3 -7 30 -10 59 -4 51
        -3 54 38 91 48 44 168 104 244 122 62 15 215 18 250 4z m84 -257 c18 -38 73
        -160 123 -273 174 -392 297 -666 356 -795 33 -71 66 -148 73 -170 24 -76 303
        -741 398 -950 25 -55 58 -120 72 -145 18 -31 24 -52 20 -65 -4 -11 -5 -24 -2
        -29 2 -5 -1 -7 -8 -4 -20 6 -138 245 -227 458 -45 107 -152 355 -238 550 -86
        195 -197 452 -247 570 -50 118 -112 262 -139 320 -26 58 -71 170 -99 250 -28
        80 -71 188 -97 240 -26 52 -49 98 -51 103 -2 4 5 7 15 7 14 0 28 -19 51 -67z
        m-141 -12 c57 -53 172 -290 326 -671 214 -527 467 -1119 622 -1450 37 -80 78
        -172 90 -205 12 -33 26 -68 30 -77 6 -16 0 -18 -52 -18 l-59 0 -57 115 c-60
        121 -150 325 -517 1175 -122 283 -269 621 -325 750 -132 301 -154 377 -123
        408 17 17 18 16 65 -27z m1263 -2547 c5 -5 13 -30 16 -54 l6 -45 -88 -1 c-71
        -1 -103 -6 -159 -28 -86 -33 -146 -68 -196 -113 l-39 -35 0 75 c0 74 0 75 37
        107 47 41 124 77 205 95 70 16 202 15 218 -1z m-3 -231 c11 -10 73 -115 138
        -233 132 -239 245 -433 333 -572 l59 -93 53 -340 c66 -424 64 -405 53 -405 -4
        0 -42 105 -83 233 -164 511 -220 627 -300 627 -39 0 -52 -21 -52 -87 1 -61 23
        -140 38 -135 5 2 8 21 7 42 -4 80 58 37 118 -81 40 -81 123 -327 164 -489 19
        -74 43 -162 54 -195 11 -33 18 -61 16 -63 -2 -2 -22 28 -45 67 -105 181 -180
        275 -385 481 l-203 205 -7 80 c-4 44 -18 145 -31 225 -14 80 -38 221 -54 314
        -16 94 -27 172 -25 174 6 6 8 0 48 -163 19 -77 54 -247 78 -377 24 -131 47
        -238 50 -238 17 0 49 70 49 108 0 109 -74 375 -179 647 -17 44 -31 83 -31 86
        0 4 23 12 50 19 71 17 64 34 -10 27 l-60 -5 0 28 c0 38 17 80 42 108 27 27 87
        30 115 5z"
        />
        </g>
        <path
          className="wave-2"
          d="M5990 8814 c-389 -44 -669 -117 -970 -254 -224 -101 -431 -229 -660
        -406 -144 -112 -422 -386 -530 -524 -259 -330 -493 -765 -586 -1090 -48 -166
        -25 -147 69 55 295 635 567 994 1060 1396 229 188 567 390 815 488 373 148
        825 221 1187 192 579 -47 1037 -229 1495 -593 438 -349 732 -753 946 -1300
        345 -882 315 -2000 -77 -2925 -238 -560 -556 -1014 -962 -1370 -337 -296 -661
        -479 -1032 -582 -417 -115 -878 -107 -1280 24 -142 46 -378 163 -530 262 -66
        44 -127 83 -134 88 -33 19 34 -58 113 -132 214 -200 636 -382 1006 -434 139
        -20 469 -17 605 4 467 73 899 282 1305 634 143 124 368 355 474 488 504 631
        824 1471 887 2328 16 209 6 570 -21 772 -79 605 -260 1103 -563 1555 -202 301
        -416 527 -717 754 -403 304 -799 473 -1280 547 -128 20 -521 34 -620 23z"
        />
        <path
          className="wave-3"
          d="M5655 8064 c-16 -2 -72 -9 -123 -15 -245 -28 -586 -146 -847 -291
        -206 -115 -342 -218 -545 -415 -233 -225 -424 -488 -604 -833 -104 -201 -153
        -340 -171 -485 -8 -73 3 -65 34 25 52 146 277 536 427 737 306 409 638 704
        992 882 374 188 708 262 1116 248 322 -11 598 -80 893 -224 216 -104 406 -246
        605 -451 368 -380 608 -871 709 -1452 27 -156 38 -633 20 -813 -65 -621 -293
        -1207 -657 -1694 -108 -145 -344 -384 -477 -482 -282 -210 -593 -357 -897
        -423 -92 -20 -133 -23 -335 -23 -264 0 -336 12 -575 91 -206 69 -498 218 -648
        331 -60 45 -44 17 29 -51 241 -223 592 -408 904 -475 615 -134 1315 117 1865
        668 364 364 640 839 803 1381 155 513 188 1140 86 1645 -105 521 -360 1021
        -709 1388 -321 338 -624 521 -1075 648 -215 61 -347 80 -585 84 -113 2 -218 1
        -235 -1z"
        />
        <path
          className="wave-4"
          d="M5330 7370 c-227 -32 -398 -83 -595 -180 -243 -119 -443 -266 -666
        -492 -193 -194 -325 -374 -447 -608 -81 -153 -180 -446 -158 -467 3 -3 22 32
        44 78 267 579 731 1076 1248 1340 148 75 299 127 468 161 162 33 453 33 613 0
        297 -60 571 -196 788 -392 347 -312 561 -707 662 -1219 26 -129 27 -151 27
        -436 0 -284 -1 -308 -27 -450 -56 -305 -127 -528 -238 -750 -129 -257 -251
        -429 -428 -606 -264 -262 -548 -422 -881 -495 -70 -16 -126 -19 -320 -18 -253
        0 -317 9 -520 70 -94 28 -284 123 -418 209 l-87 56 70 -66 c98 -92 247 -204
        330 -247 380 -198 839 -223 1234 -66 519 205 876 551 1161 1123 122 246 207
        525 255 835 22 144 31 495 16 645 -42 412 -186 830 -391 1136 -134 198 -356
        428 -520 538 -189 126 -433 226 -672 276 -98 21 -160 27 -303 30 -99 2 -209 0
        -245 -5z"
        />
        <path
          className="wave-5"
          d="M5005 6694 c-253 -39 -414 -97 -600 -218 -318 -207 -609 -576 -793
        -1006 -27 -63 -53 -135 -57 -160 -6 -40 2 -30 76 100 45 80 100 176 122 213
        138 242 449 558 702 715 119 73 176 100 304 142 165 54 297 74 440 67 578 -29
        1082 -470 1246 -1089 48 -183 59 -270 59 -483 0 -213 -12 -313 -59 -496 -39
        -152 -81 -263 -156 -409 -220 -429 -542 -700 -954 -806 -99 -25 -127 -28 -280
        -29 -132 0 -188 4 -250 19 -118 27 -268 82 -365 132 -46 24 -85 42 -87 40 -6
        -5 125 -106 183 -141 84 -51 201 -93 339 -123 164 -35 379 -36 535 -3 312 66
        593 251 813 534 290 371 437 807 437 1290 0 324 -62 596 -195 862 -85 168
        -176 295 -300 420 -206 206 -464 347 -740 407 -88 19 -351 32 -420 22z"
        />
        <path
          className="wave-6"
          d="M4660 6065 c-277 -55 -535 -235 -748 -521 -97 -131 -150 -218 -185
        -304 -30 -76 -45 -146 -29 -137 5 4 65 78 133 164 144 186 370 416 479 488
        182 121 318 165 506 165 232 0 421 -80 601 -253 165 -159 277 -383 319 -636
        13 -82 15 -139 11 -270 -8 -231 -41 -368 -134 -556 -125 -250 -282 -422 -487
        -531 -258 -137 -511 -148 -763 -34 -37 17 -68 28 -70 26 -8 -8 99 -78 171
        -111 119 -55 190 -69 356 -69 117 0 160 5 223 22 286 79 551 319 717 649 66
        132 106 256 131 405 18 105 20 150 16 308 -7 255 -38 385 -142 595 -159 320
        -422 529 -758 600 -83 18 -258 18 -347 0z"
        />
        <path
          className="wave-7"
          d="M4420 5514 c-49 -10 -126 -37 -185 -67 -159 -78 -390 -329 -465 -504
        -33 -77 -20 -83 29 -13 111 159 335 337 499 398 100 37 254 42 354 12 135 -40
        227 -107 308 -223 189 -268 184 -669 -10 -960 -106 -158 -210 -235 -378 -278
        -117 -30 -236 -22 -372 24 l-45 16 30 -24 c119 -97 320 -138 484 -100 221 52
        444 284 537 559 76 221 71 469 -11 674 -69 170 -184 309 -326 393 -118 70
        -188 91 -314 95 -60 1 -121 0 -135 -2z"
        />
        <path
          className="wave-8"
          d="M4118 5011 c-73 -29 -112 -57 -169 -119 -51 -56 -113 -170 -107 -198
        2 -8 21 9 45 41 178 230 469 214 586 -33 30 -63 32 -74 32 -183 0 -113 -1
        -116 -37 -191 -28 -55 -55 -92 -102 -136 -80 -74 -137 -96 -237 -90 -74 4 -76
        0 -14 -24 97 -38 220 -31 316 17 25 13 70 50 100 82 169 183 182 440 35 661
        -87 132 -174 184 -316 189 -66 3 -96 -1 -132 -16z"
        />
      </g>
    </svg>
  );
}
